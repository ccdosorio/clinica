{"version":3,"sources":["app/views/prescription/PrescriptionDetail.jsx"],"names":["PrescriptionDetail","props","useState","data","setData","form","setForm","medicines","setMedicines","diagnostic","setDiagnostic","getData","a","body","idprescription","match","params","id","Https","post","res","idreceta","iddiagnostic","iddiagnostico","idmedicine","idmedicamento","quantity","cantidad","days","dias","description","descripcion","getMedicines","get","getDiagnostics","idConsultation","idconsultation","select","handleChange","event","target","name","value","handleDiagnostic","values","handleMedicine","handleSubmit","code","NotificationManager","success","message","status","error","useEffect","routeSegments","path","className","diagnostico","medicamento","enfermedad","dosis","empleado","doctor","moment","fechaConsulta","format","classNamePrefix","placeholder","options","onChange","defaultValue","type","cols","rows","onClick"],"mappings":"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","file":"static/js/69.9f476da4.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { Breadcrumb } from \"@gull\";\r\nimport { NotificationContainer } from \"react-notifications\";\r\nimport { NotificationManager } from \"react-notifications\";\r\nimport moment from \"moment\";\r\nimport Select from \"react-select\";\r\n\r\nimport Https from \"../../api/Https\";\r\n\r\nconst PrescriptionDetail = (props) => {\r\n  const [data, setData] = useState({});\r\n  const [form, setForm] = useState({});\r\n  const [medicines, setMedicines] = useState([]);\r\n  const [diagnostic, setDiagnostic] = useState([]);\r\n\r\n  const getData = async () => {\r\n    let body = { idprescription: props.match.params.id };\r\n    const res = await Https.post(\"prescription/detail\", body);\r\n    setData(res[0]);\r\n    setForm({\r\n      idprescription: res[0].idreceta,\r\n      iddiagnostic: res[0].iddiagnostico,\r\n      idmedicine: res[0].idmedicamento,\r\n      quantity: res[0].cantidad,\r\n      days: res[0].dias,\r\n      description: res[0].descripcion,\r\n    });\r\n  };\r\n\r\n  const getMedicines = async () => {\r\n    const res = await Https.get(\"consulta/medicines\");\r\n    setMedicines(res);\r\n  };\r\n\r\n  const getDiagnostics = async () => {\r\n    let body = {\r\n      idConsultation: props.match.params.idconsultation,\r\n      select: true,\r\n    };\r\n    const res = await Https.post(\"consulta/get/diagnostics\", body);\r\n    setDiagnostic(res);\r\n  };\r\n\r\n  const handleChange = async (event) => {\r\n    setForm({\r\n      ...form,\r\n      [event.target.name]: event.target.value,\r\n    });\r\n  };\r\n\r\n  const handleDiagnostic = async (values) => {\r\n    setForm({\r\n      ...form,\r\n      iddiagnostic: values.value,\r\n    });\r\n  };\r\n\r\n  const handleMedicine = async (values) => {\r\n    setForm({\r\n      ...form,\r\n      idmedicine: values.value,\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (values) => {\r\n    const res = await Https.post(\"prescription/edit\", form);\r\n    if (res.code === 200) {\r\n      NotificationManager.success(res.message, res.status);\r\n      await getData();\r\n    } else {\r\n      NotificationManager.error(\"Error\", 500);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getData();\r\n    getMedicines();\r\n    getDiagnostics();\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      <Breadcrumb\r\n        routeSegments={[\r\n          { name: \"Regresar\", path: `/report/prescription` },\r\n          { name: \"Detalle de Receta\" },\r\n        ]}\r\n      ></Breadcrumb>\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card mb-6\">\r\n            <div className=\"card-body\">\r\n              <div className=\"card-title d-flex align-items-center\">\r\n                <h3 className=\"mb-0\">Receta No. {data.idreceta} </h3>\r\n                <span className=\"flex-grow-1\"></span>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Diagnóstico: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.diagnostico}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Medicamento: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.medicamento}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Cantidad: </p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"mt-0\">{data.cantidad}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Días: </p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"mt-0\">{data.dias}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Descripción: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.descripcion}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Enfermedad: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.enfermedad}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Dosis: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.dosis}</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"row\">\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Paciente: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.empleado}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Doctor: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">{data.doctor}</p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Fecha Consulta: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <p className=\"mt-0\">\r\n                    {moment(data.fechaConsulta).format(\"LL\")}\r\n                  </p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <br />\r\n      <div className=\"row\">\r\n        <div className=\"col-md-12\">\r\n          <div className=\"card mb-6\">\r\n            <div className=\"card-body\">\r\n              <div className=\"row\">\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Diagnóstico: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <Select\r\n                    className=\"basic-single\"\r\n                    classNamePrefix=\"select\"\r\n                    placeholder=\"Seleccione\"\r\n                    id=\"iddiagnostic\"\r\n                    name=\"iddiagnostic\"\r\n                    options={diagnostic}\r\n                    onChange={handleDiagnostic}\r\n                    defaultValue={data.iddiagnostico}\r\n                  />\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Medicamento: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <Select\r\n                    className=\"basic-single\"\r\n                    classNamePrefix=\"select\"\r\n                    placeholder=\"Seleccione\"\r\n                    id=\"idmedicine\"\r\n                    name=\"idmedicine\"\r\n                    options={medicines}\r\n                    onChange={handleMedicine}\r\n                    defaultValue={data.idmedicamento}\r\n                  />\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Cantidad: </p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    id=\"quantity\"\r\n                    placeholder=\"Cantidad\"\r\n                    name=\"quantity\"\r\n                    defaultValue={data.cantidad || \"\"}\r\n                    onChange={handleChange}\r\n                  />\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Días: </p>\r\n                </div>\r\n                <div className=\"col-1\">\r\n                  <input\r\n                    type=\"number\"\r\n                    className=\"form-control\"\r\n                    id=\"days\"\r\n                    placeholder=\"Días\"\r\n                    name=\"days\"\r\n                    defaultValue={data.dias || \"\"}\r\n                    onChange={handleChange}\r\n                  />\r\n                </div>\r\n              </div>\r\n              <br />\r\n              <div className=\"row\">\r\n                <div className=\"col-1\">\r\n                  <p className=\"text-muted\">Descripción: </p>\r\n                </div>\r\n                <div className=\"col-3\">\r\n                  <textarea\r\n                    className=\"form-control\"\r\n                    name=\"description\"\r\n                    id=\"description\"\r\n                    cols=\"10\"\r\n                    rows=\"5\"\r\n                    placeholder=\"Descripción\"\r\n                    onChange={handleChange}\r\n                    defaultValue={data.descripcion}\r\n                  ></textarea>\r\n                </div>\r\n              </div>\r\n              <div className=\"d-flex justify-content-end\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary\"\r\n                  onClick={handleSubmit}\r\n                >\r\n                  Editar\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <NotificationContainer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PrescriptionDetail;\r\n"],"sourceRoot":""}