{"version":3,"sources":["app/views/sessions/Signin.jsx"],"names":["Signin","props","firebase","useFirebaseApp","login","values","a","auth","signInWithEmailAndPassword","email","password","then","userCredential","user","operationType","user_auth","username","token","refreshToken","history","push","localStorage","setItem","JSON","stringify","catch","error","code","swal","fire","icon","title","text","footer","timer","formik","useFormik","initialValues","validate","errors","onSubmit","className","style","backgroundImage","width","margin","src","alt","handleSubmit","htmlFor","type","name","onChange","handleChange","value"],"mappings":"4NAyIeA,UAnIA,SAACC,GACd,IAAMC,EAAWC,cAEXC,EAAK,uCAAG,WAAOC,GAAP,SAAAC,EAAA,sDACZJ,EACGK,OACAC,2BACCH,EAAOI,MAAQ,wBACfJ,EAAOK,UAERC,MAAK,SAACC,GACL,IAAIC,EAAOD,EAAeC,KAC1B,GAAqC,WAAjCD,EAAeE,cAA4B,CAC7C,IAAIC,EAAY,CACdC,SAAUX,EAAOI,MACjBA,MAAOI,EAAKJ,MACZQ,MAAOJ,EAAKK,cAEdjB,EAAMkB,QAAQC,KAAK,SACnBC,aAAaC,QAAQ,YAAaC,KAAKC,UAAUT,QAGpDU,OAAM,SAACC,GACUA,EAAMC,MAGpBC,IAAKC,KAAK,CACRC,KAAM,QACNC,MAAO,QACPC,KAAM,0CACNC,OAAQ,6BACRC,MAAO,SA5BH,2CAAH,sDAsDLC,EAASC,YAAU,CACvBC,cAAe,CACb5B,MAAO,GACPC,SAAU,IAEZ4B,SAnBe,SAACjC,GAChB,IAAMkC,EAAS,GAUf,OARKlC,EAAOI,QACV8B,EAAO9B,MAAQ,aAGZJ,EAAOK,WACV6B,EAAO7B,SAAW,aAGb6B,GASPC,SAAU,SAACnC,GACTD,EAAMC,MAGV,OACE,yBACEoC,UAAU,mBACVC,MAAO,CACLC,gBAAiB,wCAGnB,yBAAKF,UAAU,gBACb,yBACEA,UAAU,gBACVC,MAAO,CAAEE,MAAO,QAASC,OAAQ,QAEjC,yBAAKJ,UAAU,OACb,yBAAKA,UAAU,aACb,yBAAKA,UAAU,OACb,yBAAKA,UAAU,8BACb,yBAAKK,IAAI,8BAA8BC,IAAI,MAE7C,wBAAIN,UAAU,gBAAd,uBACA,0BAAMD,SAAUL,EAAOa,cACrB,yBAAKP,UAAU,cACb,2BAAOQ,QAAQ,SAAf,WACA,2BACER,UAAU,sDACVS,KAAK,OACLC,KAAK,QACLC,SAAUjB,EAAOkB,aACjBC,MAAOnB,EAAO9B,OAAOI,QAEtB0B,EAAOI,OAAO9B,MACb,yBAAKgC,UAAU,eAAeN,EAAOI,OAAO9B,OAC1C,MAEN,yBAAKgC,UAAU,cACb,2BAAOQ,QAAQ,YAAf,iBACA,2BACER,UAAU,oCACVS,KAAK,WACLC,KAAK,WACLC,SAAUjB,EAAOkB,aACjBC,MAAOnB,EAAO9B,OAAOK,WAEtByB,EAAOI,OAAO7B,SACb,yBAAK+B,UAAU,eACZN,EAAOI,OAAO7B,UAEf,MAEN,4BACE+B,UAAU,0CACVS,KAAK,UAFP","file":"static/js/72.969397fe.chunk.js","sourcesContent":["import React from \"react\";\r\nimport { useFirebaseApp } from \"reactfire\";\r\nimport { useFormik } from \"formik\";\r\nimport \"firebase/auth\";\r\nimport swal from \"sweetalert2\";\r\n\r\nconst Signin = (props) => {\r\n  const firebase = useFirebaseApp();\r\n\r\n  const login = async (values) => {\r\n    firebase\r\n      .auth()\r\n      .signInWithEmailAndPassword(\r\n        values.email + \"@nuestrodiario.com.gt\",\r\n        values.password\r\n      )\r\n      .then((userCredential) => {\r\n        var user = userCredential.user;\r\n        if (userCredential.operationType === \"signIn\") {\r\n          let user_auth = {\r\n            username: values.email,\r\n            email: user.email,\r\n            token: user.refreshToken,\r\n          };\r\n          props.history.push(\"/home\");\r\n          localStorage.setItem(\"user_auth\", JSON.stringify(user_auth));\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        var errorCode = error.code;\r\n        // var errorMessage = error.message;\r\n        if (errorCode) {\r\n          swal.fire({\r\n            icon: \"error\",\r\n            title: \"Error\",\r\n            text: \"¡Usuario o contraseña incorrecta!\",\r\n            footer: \"Vuelve a intentar de nuevo\",\r\n            timer: 3000,\r\n          });\r\n        }\r\n      });\r\n  };\r\n\r\n  // const logout = async (event) => {\r\n  //   event.preventDefault();\r\n  //   const res = await firebase.auth().signOut();\r\n  //   console.log(res);\r\n  // };\r\n\r\n  const validate = (values) => {\r\n    const errors = {};\r\n\r\n    if (!values.email) {\r\n      errors.email = \"Requerido\";\r\n    }\r\n\r\n    if (!values.password) {\r\n      errors.password = \"Requerido\";\r\n    }\r\n\r\n    return errors;\r\n  };\r\n\r\n  const formik = useFormik({\r\n    initialValues: {\r\n      email: \"\",\r\n      password: \"\",\r\n    },\r\n    validate,\r\n    onSubmit: (values) => {\r\n      login(values);\r\n    },\r\n  });\r\n  return (\r\n    <div\r\n      className=\"auth-layout-wrap\"\r\n      style={{\r\n        backgroundImage: \"url(/assets/images/portadaBlue.jpg)\",\r\n      }}\r\n    >\r\n      <div className=\"auth-content\">\r\n        <div\r\n          className=\"card o-hidden\"\r\n          style={{ width: \"500px\", margin: \"10%\" }}\r\n        >\r\n          <div className=\"row\">\r\n            <div className=\"col-md-12\">\r\n              <div className=\"p-4\">\r\n                <div className=\"auth-logo text-center mb-4\">\r\n                  <img src=\"/assets/images/ndd-logo.png\" alt=\"\" />\r\n                </div>\r\n                <h1 className=\"mb-3 text-18\">Inicio de Sesión</h1>\r\n                <form onSubmit={formik.handleSubmit}>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Usuario</label>\r\n                    <input\r\n                      className=\"form-control form-control-rounded position-relative\"\r\n                      type=\"text\"\r\n                      name=\"email\"\r\n                      onChange={formik.handleChange}\r\n                      value={formik.values.email}\r\n                    />\r\n                    {formik.errors.email ? (\r\n                      <div className=\"text-danger\">{formik.errors.email}</div>\r\n                    ) : null}\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">Contraseña</label>\r\n                    <input\r\n                      className=\"form-control form-control-rounded\"\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      onChange={formik.handleChange}\r\n                      value={formik.values.password}\r\n                    />\r\n                    {formik.errors.password ? (\r\n                      <div className=\"text-danger\">\r\n                        {formik.errors.password}\r\n                      </div>\r\n                    ) : null}\r\n                  </div>\r\n                  <button\r\n                    className=\"btn btn-rounded btn-info btn-block mt-2\"\r\n                    type=\"submit\"\r\n                  >\r\n                    Iniciar Sesión\r\n                  </button>\r\n                </form>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Signin;\r\n"],"sourceRoot":""}